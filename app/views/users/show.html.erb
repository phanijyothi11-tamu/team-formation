<div class="container">
  <h2 class="greeting">Howdy, <%= @current_user.name %></h2>
  <div class="user-details">
    <p><strong>Email:</strong> <%= @current_user.email %></p>
  </div>
  <h3 class="forms-title">Your Forms</h3>
  
  <%= link_to "Create New Form", new_form_path, class: "create-form-btn" %>

  <% if @forms.any? %>
    <table class="form-table table table-striped">
      <thead class="table-header">
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Deadline</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @forms.each do |form| %>
          <tr>
            <td><%= form.name %></td>
            <td><%= form.description %></td>
            <td>
              <% if form.deadline %>
                <span class="deadline">
                  <%= format_deadline(form.deadline).html_safe %>
                </span>
              <% else %>
                No deadline set
              <% end %>
            </td>
            <td>
              <% if form.published? %>
                <span class="badge bg-success">Published</span>
              <% else %>
                <span class="badge bg-secondary">Draft</span>
              <% end %>
            </td>
            <td class="actions-cell">
              <%= link_to "View", form_path(form), class: "btn btn-info action-btn" %>
              
              <% if form.published? %>
                <%= link_to "View Responses", form_form_responses_path(form), class: "btn btn-sm btn-info" %>
              <% else %>
                <%= link_to "Edit", edit_form_path(form), class: "btn btn-warning action-btn" %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="no-forms-message">No forms have been created yet.</p>
  <% end %>

  <%= link_to "Logout", logout_path, class: "btn btn-secondary mt-3 logout-btn mt-3" %>

  <script>
    function toggleDeadlinePicker(formId) {
      var picker = document.getElementById("deadline-picker-" + formId);
      picker.style.display = picker.style.display === "none" ? "block" : "none";
    }
  </script>
</div>